#!/usr/bin/env ruby

$:.unshift File.expand_path(File.dirname(__FILE__) + "/../lib")

require 'rubygems'
require 'active_record'
require 'yaml'

require 'adabase/app/models/domain.rb'
require 'adabase/app/models/scan.rb'
require 'adabase/app/models/scan_fail.rb'
require 'adabase/app/models/ad.rb'

require "scheduler/base.rb"

options = Scheduler::parse_options ARGV

Dir.chdir options.pwd if options.pwd

ActiveRecord::Base.establish_connection YAML.load_file('../database.yml')[ ENV['RAILS_ENV'] ]

Scheduler::run options
